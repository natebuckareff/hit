import{p as w,G as C,c as t,r as R,H as _,M as f,z as m,B as s,s as D,A as h,I as x,J as k}from"./routing-B-zMlmLc.js";import{c as y,s as g,g as I,L,T as S,l as E,r as N}from"./Time-ej1zzrIp.js";import{D as T,A as p,n as A}from"./index.browser-DOi0UmWz.js";var M=m('<div class="flex flex-col items-center gap-2"><div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-500 border-t-transparent">'),P=m('<div class="flex flex-col items-stretch gap-2">'),z=m('<div class="flex w-full flex-row items-center gap-4 border p-2"><button class="relative h-[16px] w-[16px] cursor-grab bg-blue-300 select-none"></button><input class="w-40 border border-gray-600 px-2 py-1"type=text placeholder=Name><button class="h-[16px] w-[16px] cursor-pointer bg-red-600 select-none">'),B=m('<div class="flex flex-col items-center rounded-sm border border-dashed border-[rgba(0,0,0,0.50)] p-2"><button class="cursor-pointer text-[rgba(0,0,0,0.80)] underline">Create routine');function q(){const[r,i]=w(!0),[e,n]=y([]);C(()=>{n(E()),i(!1)});function a(){const l={id:A(),name:"New routine",items:[]};n([...e,l]),g(e)}return t(L,{title:"Routines",get children(){return t(_,{get children(){return[t(f,{get when(){return r()},get children(){return M()}}),t(f,{get when(){return e.length===0},get children(){return t(b,{onClick:a})}}),t(f,{get when(){return e.length>0},get children(){var l=P();return s(l,t(T,{class:"flex flex-col gap-2",items:e,setItems:n,renderItem:(o,u,v)=>t(G,{get id(){return u?.id??""},get name(){return u?.name??""},get totalDuration(){return u?I(u):0},dragActivators:v,onNameChange:c=>{const d=e.findIndex($=>$.id===o);d!==-1&&(n(d,"name",c),g(e))},onDelete:()=>{const c=e.filter(d=>d.id!==o);n(c),g(c)}}),onChange:g}),null),s(l,t(b,{onClick:a}),null),l}})]}})}})}function G(r){const i=()=>N(r.totalDuration);return(()=>{var e=z(),n=e.firstChild,a=n.nextSibling,l=a.nextSibling;return D(n,h(()=>r.dragActivators),!1,!1),s(e,t(p,{get href(){return`${r.id}/play`},class:"cursor-pointer underline",children:"Play"}),a),s(e,t(S,h(i)),a),a.$$input=o=>r.onNameChange?.(o.target.value),s(e,t(p,{get href(){return`${r.id}/edit`},class:"ml-auto cursor-pointer underline",children:"Edit"}),l),x(l,"click",r.onDelete,!0),k(()=>a.value=r.name),e})()}function b(r){return(()=>{var i=B(),e=i.firstChild;return x(e,"click",r.onClick,!0),i})()}R(["input","click"]);export{q as default};
