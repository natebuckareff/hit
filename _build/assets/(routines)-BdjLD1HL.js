import{p as C,G as R,c as t,r as _,H as D,M as m,z as f,B as i,s as k,A as h,I as v,J as y}from"./routing-B-zMlmLc.js";import{c as I,s as g,g as L,L as S,h as p,T as E,l as N,r as T}from"./Time-ej1zzrIp.js";import{D as A,A as b,n as M}from"./index.browser-DOi0UmWz.js";var P=f('<div class="flex flex-col items-center gap-2"><div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-500 border-t-transparent">'),z=f('<div class="flex flex-col items-stretch gap-2">'),B=f('<div class="flex w-full flex-row items-center gap-4 border p-2"><button class="relative h-[16px] w-[16px] cursor-grab bg-blue-300 select-none"></button><input class="w-40 border border-gray-600 px-2 py-1"type=text placeholder=Name><button class="h-[16px] w-[16px] cursor-pointer bg-red-600 select-none">'),G=f('<div class="flex flex-col items-center rounded-sm border border-dashed border-[rgba(0,0,0,0.50)] p-2"><button class="cursor-pointer text-[rgba(0,0,0,0.80)] underline">Create routine');function F(){const[r,s]=C(!0),[e,n]=I([]);R(()=>{n(N()),s(!1)});function a(){const l={id:M(),name:"New routine",items:[]};n([...e,l]),g(e)}return t(S,{title:"Routines",get children(){return t(D,{get children(){return[t(m,{get when(){return r()},get children(){return P()}}),t(m,{get when(){return e.length===0},get children(){return t(x,{onClick:a})}}),t(m,{get when(){return e.length>0},get children(){var l=z();return i(l,t(A,{class:"flex flex-col gap-2",items:e,setItems:n,renderItem:(o,u,$)=>t(H,{get id(){return u?.id??""},get name(){return u?.name??""},get totalDuration(){return u?L(u):0},dragActivators:$,onNameChange:c=>{const d=e.findIndex(w=>w.id===o);d!==-1&&(n(d,"name",c),g(e))},onDelete:()=>{const c=e.filter(d=>d.id!==o);n(c),g(c)}}),onChange:g}),null),i(l,t(x,{onClick:a}),null),l}})]}})}})}function H(r){const s=()=>T(r.totalDuration);return(()=>{var e=B(),n=e.firstChild,a=n.nextSibling,l=a.nextSibling;return k(n,h(()=>r.dragActivators),!1,!1),i(e,t(b,{get href(){return p(`${r.id}/play`)},class:"cursor-pointer underline",children:"Play"}),a),i(e,t(E,h(s)),a),a.$$input=o=>r.onNameChange?.(o.target.value),i(e,t(b,{get href(){return p(`${r.id}/edit`)},class:"ml-auto cursor-pointer underline",children:"Edit"}),l),v(l,"click",r.onDelete,!0),y(()=>a.value=r.name),e})()}function x(r){return(()=>{var s=G(),e=s.firstChild;return v(e,"click",r.onClick,!0),s})()}_(["input","click"]);export{F as default};
