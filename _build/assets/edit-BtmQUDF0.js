import{K as R,p as E,D as T,c as i,r as j,H as F,M as A,z as I,B as $,S as P,A as y,J as w,s as H,I as k,L as D}from"./routing-D8Du2lqM.js";import{c as z,T as N,r as L,g as B,s as x,L as J,l as K}from"./Time-D1TL69BI.js";import{A as O,D as U,n as X}from"./index.browser-CYSiYMco.js";var q=I('<div class="flex flex-col items-center gap-2"><div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-500 border-t-transparent">'),G=I('<div class="flex flex-col gap-4"><div class="flex flex-row items-center gap-2"><input class="w-1/2 border border-gray-600 px-2 py-1 text-2xl font-bold text-gray-700 opacity-70"type=text placeholder=Name></div><div class="flex flex-col items-stretch gap-2">'),Q=I('<div class="flex w-full flex-row items-center gap-4 border p-2"><button class="relative h-[16px] w-[16px] cursor-grab bg-blue-300 select-none"></button><input class="w-40 border border-gray-600 px-2 py-1"type=text placeholder=Name><input class="w-40 border border-gray-600 px-2 py-1"type=number inputmode=numeric pattern=[0-9]* placeholder=00:00 autocomplete=off><div class="flex flex-row items-center gap-2"><input type=checkbox><label class=select-none>Flash</label></div><button class="ml-auto h-[16px] w-[16px] cursor-pointer bg-red-600 select-none">'),V=I('<div class="flex flex-col items-center rounded-sm border border-dashed border-[rgba(0,0,0,0.50)] p-2"><button class="cursor-pointer text-[rgba(0,0,0,0.80)] underline">Add');const W=5999;function re(){const e=R(),[d,b]=E(!0),[n,a]=z([]),c=()=>n.findIndex(t=>t.id===e.id),u=()=>n.find(t=>t.id===e.id),f=()=>u()?.items??[],_=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"items",t),x(n))};T(()=>{a(K()),b(!1)});const r=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"name",t),x(n))},h=()=>{const t={id:X(),name:"New item",duration:1,flash:!0};_([...f(),t])};return i(J,{get children(){return i(F,{get children(){return[i(A,{get when(){return d()},get children(){return q()}}),i(A,{get when(){return!d()},get children(){var t=G(),l=t.firstChild,p=l.firstChild,S=l.nextSibling;return p.$$input=m=>r(m.target.value),$(l,i(P,{get when(){return u()},children:m=>i(N,y(()=>L(B(m()))))}),null),$(l,i(O,{get href(){return`/${e.id}/play`},class:"ml-auto cursor-pointer text-xl underline",children:"Play"}),null),$(S,i(U,{class:"flex flex-col gap-2",get items(){return f()},setItems:_,renderItem:(m,C,M)=>i(Y,{get id(){return C?.id??""},get name(){return C?.name??""},get duration(){return C?.duration??0},get flash(){return C?.flash??!1},dragActivators:M,onNameChange:g=>{const s=c(),o=f().findIndex(v=>v.id===m);s!==-1&&o!==-1&&(a(s,"items",o,"name",g),x(n))},onDurationChange:g=>{const s=c(),o=f().findIndex(v=>v.id===m);s!==-1&&o!==-1&&(a(s,"items",o,"duration",g),x(n))},onFlashChange:g=>{const s=c(),o=f().findIndex(v=>v.id===m);s!==-1&&o!==-1&&(a(s,"items",o,"flash",g),x(n))},onDelete:()=>{const g=c();if(g!==-1){const s=f().filter(o=>o.id!==m);a(g,"items",s),x(n)}}}),onChange:()=>x(n)}),null),$(S,i(Z,{onClick:h}),null),w(()=>p.value=u()?.name),t}})]}})}})}function Y(e){return(()=>{var d=Q(),b=d.firstChild,n=b.nextSibling,a=n.nextSibling,c=a.nextSibling,u=c.firstChild,f=u.nextSibling,_=c.nextSibling;return H(b,y(()=>e.dragActivators),!1,!1),n.$$input=r=>e.onNameChange?.(r.target.value),a.$$input=r=>{const h=Math.min(Math.max(1,Number(r.target.value)),W),t=h.toString();r.target.value=t,e.onDurationChange?.(h)},$(d,i(N,y(()=>L(e.duration))),c),u.addEventListener("change",r=>e.onFlashChange?.(r.target.checked)),k(_,"click",e.onDelete,!0),w(r=>{var h=`flash-${e.id}`,t=`flash-${e.id}`;return h!==r.e&&D(u,"id",r.e=h),t!==r.t&&D(f,"for",r.t=t),r},{e:void 0,t:void 0}),w(()=>n.value=e.name),w(()=>a.value=e.duration),w(()=>u.checked=e.flash),d})()}function Z(e){return(()=>{var d=V(),b=d.firstChild;return k(b,"click",e.onClick,!0),d})()}j(["input","click"]);export{re as default};
