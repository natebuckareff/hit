import{K as N,p as E,G as R,c as o,r as M,H as T,M as S,z as y,B as _,S as j,A,J as $,s as F,I as D,L as k}from"./routing-B-zMlmLc.js";import{c as P,T as H,r as z,g as B,s as x,L as G,l as J}from"./Time-BsSweBhv.js";import{A as K,D as q,n as O}from"./index.browser-DWAmC79B.js";var Q=y('<div class="flex flex-col items-center gap-2"><div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-500 border-t-transparent">'),U=y('<div class="flex flex-col gap-4"><div class="flex flex-row items-center gap-2"><input class="w-1/2 border border-gray-600 px-2 py-1 text-2xl font-bold text-gray-700 opacity-70"type=text placeholder=Name></div><div class="flex flex-col items-stretch gap-2">'),V=y('<div class="flex w-full flex-row items-center gap-4 border p-2"><button class="relative h-[16px] w-[16px] cursor-grab bg-blue-300 select-none"></button><input class="w-40 border border-gray-600 px-2 py-1"type=text placeholder=Name><input class="w-40 border border-gray-600 px-2 py-1"type=number inputmode=numeric pattern=[0-9]* placeholder=00:00 autocomplete=off><div class="flex flex-row items-center gap-2"><input type=checkbox><label class=select-none>Flash</label></div><button class="ml-auto h-[16px] w-[16px] cursor-pointer bg-red-600 select-none">'),W=y('<div class="flex flex-col items-center rounded-sm border border-dashed border-[rgba(0,0,0,0.50)] p-2"><button class="cursor-pointer text-[rgba(0,0,0,0.80)] underline">Add');function ne(){const e=N(),[d,b]=E(!0),[n,a]=P([]),m=()=>n.findIndex(t=>t.id===e.id),c=()=>n.find(t=>t.id===e.id),u=()=>c()?.items??[],w=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"items",t),x(n))};R(()=>{a(J()),b(!1)});const r=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"name",t),x(n))},h=()=>{const t={id:O(),name:"New item",duration:1,flash:!0};w([...u(),t])};return o(G,{get children(){return o(T,{get children(){return[o(S,{get when(){return d()},get children(){return Q()}}),o(S,{get when(){return!d()},get children(){var t=U(),l=t.firstChild,p=l.firstChild,I=l.nextSibling;return p.$$input=f=>r(f.target.value),_(l,o(j,{get when(){return c()},children:f=>o(H,A(()=>z(B(f()))))}),null),_(l,o(K,{get href(){return`/${e.id}/play`},class:"ml-auto cursor-pointer text-xl underline",children:"Play"}),null),_(I,o(q,{class:"flex flex-col gap-2",get items(){return u()},setItems:w,renderItem:(f,C,L)=>o(X,{get id(){return C?.id??""},get name(){return C?.name??""},get duration(){return C?.duration??0},get flash(){return C?.flash??!1},dragActivators:L,onNameChange:g=>{const i=m(),s=u().findIndex(v=>v.id===f);i!==-1&&s!==-1&&(a(i,"items",s,"name",g),x(n))},onDurationChange:g=>{const i=m(),s=u().findIndex(v=>v.id===f);i!==-1&&s!==-1&&(a(i,"items",s,"duration",g),x(n))},onFlashChange:g=>{const i=m(),s=u().findIndex(v=>v.id===f);i!==-1&&s!==-1&&(a(i,"items",s,"flash",g),x(n))},onDelete:()=>{const g=m();if(g!==-1){const i=u().filter(s=>s.id!==f);a(g,"items",i),x(n)}}}),onChange:()=>x(n)}),null),_(I,o(Y,{onClick:h}),null),$(()=>p.value=c()?.name),t}})]}})}})}function X(e){return(()=>{var d=V(),b=d.firstChild,n=b.nextSibling,a=n.nextSibling,m=a.nextSibling,c=m.firstChild,u=c.nextSibling,w=m.nextSibling;return F(b,A(()=>e.dragActivators),!1,!1),n.$$input=r=>e.onNameChange?.(r.target.value),a.$$input=r=>{const h=Math.max(1,Number(r.target.value)),t=h.toString();r.target.value=t,e.onDurationChange?.(h)},c.addEventListener("change",r=>e.onFlashChange?.(r.target.checked)),D(w,"click",e.onDelete,!0),$(r=>{var h=`flash-${e.id}`,t=`flash-${e.id}`;return h!==r.e&&k(c,"id",r.e=h),t!==r.t&&k(u,"for",r.t=t),r},{e:void 0,t:void 0}),$(()=>n.value=e.name),$(()=>a.value=e.duration),$(()=>c.checked=e.flash),d})()}function Y(e){return(()=>{var d=W(),b=d.firstChild;return D(b,"click",e.onClick,!0),d})()}M(["input","click"]);export{ne as default};
