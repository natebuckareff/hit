import{K as R,p as M,G as T,c as i,r as j,H as F,M as k,z as y,B as $,S as P,A as I,J as w,s as H,I as D,L as A}from"./routing-B-zMlmLc.js";import{c as z,T as L,r as N,g as B,s as x,L as G,l as J}from"./Time-L_30tfk-.js";import{A as K,D as q,n as O}from"./index.browser-DRoZXl1w.js";var Q=y('<div class="flex flex-col items-center gap-2"><div class="h-4 w-4 animate-spin rounded-full border-2 border-blue-500 border-t-transparent">'),U=y('<div class="flex flex-col gap-4"><div class="flex flex-row items-center gap-2"><input class="w-1/2 border border-gray-600 px-2 py-1 text-2xl font-bold text-gray-700 opacity-70"type=text placeholder=Name></div><div class="flex flex-col items-stretch gap-2">'),V=y('<div class="flex w-full flex-row items-center gap-4 border p-2"><button class="relative h-[16px] w-[16px] cursor-grab bg-blue-300 select-none"></button><input class="w-40 border border-gray-600 px-2 py-1"type=text placeholder=Name><input class="w-40 border border-gray-600 px-2 py-1"type=number inputmode=numeric pattern=[0-9]* placeholder=00:00 autocomplete=off><div class="flex flex-row items-center gap-2"><input type=checkbox><label class=select-none>Flash</label></div><button class="ml-auto h-[16px] w-[16px] cursor-pointer bg-red-600 select-none">'),W=y('<div class="flex flex-col items-center rounded-sm border border-dashed border-[rgba(0,0,0,0.50)] p-2"><button class="cursor-pointer text-[rgba(0,0,0,0.80)] underline">Add');function ne(){const e=R(),[d,b]=M(!0),[n,a]=z([]),c=()=>n.findIndex(t=>t.id===e.id),u=()=>n.find(t=>t.id===e.id),f=()=>u()?.items??[],C=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"items",t),x(n))};T(()=>{a(J()),b(!1)});const r=t=>{const l=n.findIndex(p=>p.id===e.id);l!==-1&&(a(l,"name",t),x(n))},h=()=>{const t={id:O(),name:"New item",duration:1,flash:!0};C([...f(),t])};return i(G,{get children(){return i(F,{get children(){return[i(k,{get when(){return d()},get children(){return Q()}}),i(k,{get when(){return!d()},get children(){var t=U(),l=t.firstChild,p=l.firstChild,S=l.nextSibling;return p.$$input=g=>r(g.target.value),$(l,i(P,{get when(){return u()},children:g=>i(L,I(()=>N(B(g()))))}),null),$(l,i(K,{get href(){return`/${e.id}/play`},class:"ml-auto cursor-pointer text-xl underline",children:"Play"}),null),$(S,i(q,{class:"flex flex-col gap-2",get items(){return f()},setItems:C,renderItem:(g,_,E)=>i(X,{get id(){return _?.id??""},get name(){return _?.name??""},get duration(){return _?.duration??0},get flash(){return _?.flash??!1},dragActivators:E,onNameChange:m=>{const s=c(),o=f().findIndex(v=>v.id===g);s!==-1&&o!==-1&&(a(s,"items",o,"name",m),x(n))},onDurationChange:m=>{const s=c(),o=f().findIndex(v=>v.id===g);s!==-1&&o!==-1&&(a(s,"items",o,"duration",m),x(n))},onFlashChange:m=>{const s=c(),o=f().findIndex(v=>v.id===g);s!==-1&&o!==-1&&(a(s,"items",o,"flash",m),x(n))},onDelete:()=>{const m=c();if(m!==-1){const s=f().filter(o=>o.id!==g);a(m,"items",s),x(n)}}}),onChange:()=>x(n)}),null),$(S,i(Y,{onClick:h}),null),w(()=>p.value=u()?.name),t}})]}})}})}function X(e){return(()=>{var d=V(),b=d.firstChild,n=b.nextSibling,a=n.nextSibling,c=a.nextSibling,u=c.firstChild,f=u.nextSibling,C=c.nextSibling;return H(b,I(()=>e.dragActivators),!1,!1),n.$$input=r=>e.onNameChange?.(r.target.value),a.$$input=r=>{const h=Math.max(1,Number(r.target.value)),t=h.toString();r.target.value=t,e.onDurationChange?.(h)},$(d,i(L,I(()=>N(e.duration))),c),u.addEventListener("change",r=>e.onFlashChange?.(r.target.checked)),D(C,"click",e.onDelete,!0),w(r=>{var h=`flash-${e.id}`,t=`flash-${e.id}`;return h!==r.e&&A(u,"id",r.e=h),t!==r.t&&A(f,"for",r.t=t),r},{e:void 0,t:void 0}),w(()=>n.value=e.name),w(()=>a.value=e.duration),w(()=>u.checked=e.flash),d})()}function Y(e){return(()=>{var d=W(),b=d.firstChild;return D(b,"click",e.onClick,!0),d})()}j(["input","click"]);export{ne as default};
